@model IndexViewModel

@{
    ViewBag.Title = "Home Page";
}

@{

    var books = Model.RecentlyAddedBooks;
    var list = books.Take(4);
    var iterations = 0;
}

@if (!books.Any())
{
    <div class="jumbotron">
        <h1 class="display-4">Swap your old books for exciting new reads!</h1>
        <p class="lead">You have books which you will not read?</p>
        <hr class="my-4">
        <p>Create your library and exchange or give away the books that you will not read any more.</p>
        <p class="lead">
            <a class="btn btn-primary btn-lg" href="#" role="button">Add a book</a>
        </p>
    </div>
}

<div class="mb-5"></div>

<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    </ol>
    @while (iterations < 4 && list.Count() > 0)
    {
        var active = iterations == 0 ? "active" : "";
        <div class="carousel-inner ">
            <div class="carousel-item @active">
                <div class="row">
                    @foreach (var book in list)
                    {
                        <div class="card col-md-2 rounded ml-2 mb-2">
                            <a asp-controller="Books" asp-action="Details" asp-route-id="@book.Id">
                                <img class="card-img-top" src="@book.ImageUrl" alt="Card image cap">
                            </a>
                            <div class="card-body">
                                <p class="font-weight-light text-center">@book.Author</p>
                                <a asp-controller="Books" asp-action="Details" asp-route-id="@book.Id">
                                    <h5 class="text-uppercase text-center text-dark">@book.Name</h5>
                                </a>
                                <div class="d-flex flex-row d-flex justify-content-center">
                                    @if (book.Price != 0)
                                    {
                                        <div class="p-2">@book.TheBookIsFor</div>
                                        <h6 class="p-2 bg-light font-weight-bold text-secondary form-horizontal">@book.Price Bgn</h6>
                                    }
                                    else
                                    {
                                        <p class="font-weight-light font-weight-bold text-secondary">@book.TheBookIsFor</p>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
        iterations++;

        list = books.Skip(iterations * 4).Take(4);

    }

    <a class="carousel-control-prev text-dark" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<div class="mb-5"></div>

<div class="jumbotron">
    <div class="row">
        <h2 class="col-md-6 text-center">
            @Model.TotalBooks Books
        </h2>
        <h2 class="col-md-6 text-center">
            @Model.TotalKnizhari Knizhari
        </h2>
    </div>
</div>
